
<%- include ("../partials/head.ejs") %>

<body>

    <!-- HEADER ADMIN CONTAINER START-->
  
    <div class="container">
      <div class="logo">
    
        <% if(user && user.role == "admin") { %>
    
          <span class = "navbar-logo">
              <a href="/admin/dashboard">
              Fastlux
            </a>
            </span>
    
        <% } else {%>
    
          <span class = "navbar-logo">
              <a href="/casual/dashboard">
              Fastlux
            </a>
            </span>
    
        <%} %>
        
      </div>
    
      <div class = "profile" style = "display: flex;">
    
        <div class = "profile-view">

          <% if(user && user.role == "casual"){ %>
            
            <a href="/casual/profile">
                <i class="fa-solid fa-user fa-lg" style='font-size:30px; color:black; margin-top : 13px;' title = "Profile"></i>
            </a>
    
          <% } else {%>
    
            <a href="/admin/profile" title = "Profile">
              <i class="fa-solid fa-user fa-lg" style='font-size:30px; color:black; margin-top : 13px;'></i>
            </a>
    
            <% } %>
        </div>
    
        <div class = "logout">
          <a href="/auth/logout" title = "Sign out">
            <!-- <i class="fa fa-sign-out" style='font-size:30px; color:black; padding-left: 10px; margin-top : 5px;'></i> -->
            <i class="fa fa-sign-out-alt" style='font-size:30px; color:black; padding-left: 10px; margin-top : 5px;'></i>
          </a>
        </div>
      </div>
    
      </div>    
        <center><h1 style="font-family:Arial, Helvetica, sans-serif;">Admin Dashboard</h1></center>

      <br>
      
      <!-- NAVBAR START -->
    
      <nav class = "navbar navbar-light bg-dark">
          <ul>
            
              <li><a href="/admin/dashboard">Orders List</a></li>              
              <li><a href="/admin/users">Users List</a></li>
              <li><a href="/admin/reviews">Reviews List</a></li>
              <li><a href="/admin/products">Products List</a></li>
              <li><a href="/admin/addProduct">Add Product</a></li>

          </ul>
      
      </nav>
    
      <!-- NAVBAR END -->

    <!-- END HEADER ADMIN CONTAINER -->

<div class="container emp-profile container-review">

        <div class="row">

            <div class="col-md-4">
              <div class="profile-img">
                  <img src="<%= review.author.thumbnail%>" width = "500" height = "500" alt=""/>
              </div>
              <br>
          </div>

        </div>

          <div class="row hide-form">
              <div class="col-md-8">
                  <div class="tab-content profile-tab" id="myTabContent">
                      <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                  <div class="row">
                                      <div class="col-md-6">
                                          <label>Comment</label>
                                      </div>
                                      <div class="col-md-6">
                                          <p><%= review.comment%></p>
                                      </div>
                                  </div>

                                  <div class="row">
                                    <div class="col-md-6">
                                        <label>Rating</label>
                                    </div>
                                    <div class="col-md-6">
                                        <p><%= review.rating%>/5</p>
                                    </div>
                                </div>

                                  <div class="row">
                                    <div class="col-md-6">
                                        <label>Date</label>
                                    </div>
                                    <div class="col-md-6">
                                        <p><%= review.date%></p>
                                    </div>
                                </div>

                                <div class="row">
                                  <div class="col-md-6">
                                      <label>Author</label>
                                  </div>

                                  <div class="col-md-6">
                                      <p><%= review.author.username %></p>
                                  </div>

                              </div>
                      </div>
                  </div>
                  
                  <div class="col-md-6">
                    <a class = "delete"><button data-doc = "<%= review._id %>" onclick="deleteReview();">Remove</button></a>
                </div>

              </div>


          </div>

        </div>


<style>
.emp-profile{
padding: 3%;
margin-top: 3%;
margin-bottom: 3%;
border-radius: 0.5rem;
background: #fff;
}
.profile-img{
text-align: center;
}
.profile-img img{
width: 370px;
height: 370px;
}

.profile-head h5{
color: #333;
}
.profile-head h6{
color: #0062cc;
}
.profile-edit-btn{
border: none;
width: 100%;
padding: 2%;
font-weight: 600;
color: #6c757d;
cursor: pointer;
}
.profile-head .nav-tabs{
margin-bottom:5%;
}
.profile-head .nav-tabs .nav-link{
font-weight:600;
border: none;
}
.profile-head .nav-tabs .nav-link.active{
border: none;
border-bottom:2px solid #0062cc;
}
.profile-work{
padding: 14%;
margin-top: -15%;
}
.profile-work p{
font-size: 12px;
color: #818182;
font-weight: 600;
margin-top: 10%;
}
.profile-work a{
text-decoration: none;
color: #495057;
font-weight: 600;
font-size: 14px;
}
.profile-work ul{
list-style: none;
}
.profile-tab label{
font-weight: 600;
}
.profile-tab p{
font-weight: 600;
color: #0062cc;
}
</style>
        
<style>

  body{
    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"
  }
  .container{
    margin:10px auto;
    width : 100%; 
    height : 5vh;
    background:#fff; 
    z-index:1;
    display: flex;
    justify-content: space-between;
  }

  .navbar-logo{
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
      font-size:2rem;
      font-weight: bolder;
      text-decoration: none;

    }

    .navbar-logo a{
      color:black;
      text-decoration: none;

    }

  div .navbar-logo{
    padding-top:10px; 
    padding-left:10px;
    color:black;

  }

  .admin-space-navbar{
    text-align: center;
    width : 85%;
    height : 7vh;
    background-color: #2471A3;
    margin: 10px auto;
  }

  nav ul{
    margin: 10px auto;
    
  }
  nav ul li{
    
    display: inline-block;
    list-style: none;
    text-decoration: none;

    margin-top : 10px;
    margin-left:60px;

  }

  nav ul li a{
      color: #fff;
      margin-top : 10px;
      margin-bottom : 10px;
    }

    
    nav ul li a:hover{
      color: #fff;
      text-decoration: none;
    }

    nav ul li a:visited{
      color: #fff;
      text-decoration: none;
    }

  .admin-space{
        width: 100%;
        height : 92vh;

        background-color:rgba(226, 220, 220, 0.9);

        padding-top : 20px;
  }

  .addProduct{
        width : 50%;
        margin: 15px auto;          

    }

    .addProduct textarea{
        height : 100px;
    }

    @media screen and (max-width : 800px) {
    .container-review{
        display: flex; 
        flex-direction: column;
    }

    .review-overview{
      margin-top : 10vh;
  }

    .cart-btn{
      padding : 5px;
      float: left;
      width : 200px;
      margin-top: 10px;
      margin-left :auto;
  }

    .variant{
      height : 10vh;
    }
  }

</style>

<script>

  const update_btn = document.querySelector('.update_btn');
  const update_info = document.querySelector('.update_info');
  const hide_form =  document.querySelector('.hide-form');
  const update_data = () =>{

    if(update_info.style.display = 'none')
      update_info.style.display = 'inline';
      update_btn.style.display = 'none';
      hide_form.style.display = 'none';
  }

  // Handling the delete Operation
  function deleteReview(){

    let text = "Do you want to remove this review ?";

    if(confirm(text) == true){

      const trashcan = document.querySelector('a.delete');
        trashcan.addEventListener('click', (e) => {
          
          const endpoint = `/admin/reviews/delete/${event.target.dataset.doc}`;
          fetch(endpoint, {
            method: 'DELETE',
          })
          .then(response => response.json())
          .then(data => window.location.href = data.redirect)
          .catch(err => console.log(err));
        });

    }
  }

</script>

      </body>