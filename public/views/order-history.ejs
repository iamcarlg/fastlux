<%- include("../partials/head.ejs") %>

<%- include("../partials/header-admin") %>

<center>

    <h3 style="font-family:Arial, Helvetica, sans-serif;">My Order history</h3>

    <div class = "table-wrapper-scroll-x my-custom-scrollbar" style="overflow-x:auto;">

      <table class="table table-dark" style = "width:85%;">
        <thead>
          <tr>
            <th scope="col">Order Id</th>
            <th scope="col">Product name</th>
            <th scope="col">Shipping Info</th>
            <th scope="col">Quantity</th>
            <th scope="col">Amount paid</th>
            <th scope="col">Order date</th>
            <th scope="col">Status</th>
          </tr>
        </thead>
        <tbody>
  
          <% if (orders) { %>
              <% orders.slice().reverse().forEach(order=> { %>
  
  
                  <tr>
                      <th scope="row"><%= order._id %></th>
  
                      <td>
  
                          <% order.items.forEach(order=> { %>
  
                              <p><%= order.item.name %> (<%= order.item.variant %>)</p>
                              
                          <% }) %>
  
                      </td>
  
                      <td>
                          <%= order.address%> <br>
                          <%= order.zipcode%> <br>
                          <%= order.city%>,
                          <%= order.country%>
                      
                      </td>
  
                      <td><%= order.cart.totalQty %></td>
                      <td><%= order.cart.totalPrice %> â‚¬</td>
                      <td><%= order.date %></td>
                      <% if(order.status === "not delivered"){ %>
                          <td style = "color:green; font-weight: 800;">Pending</td>
                      <% } else {%>
                          <td style = "color:blue; font-weight: 800;">Delivered</td>
                      <% } %>
  
                  </tr>
  
          <% }) %>
  
          <% } else { %>
  
              <% } %>
  
        </tbody>
      </table>
      
    </div>


    <!-- footer section -->
  
  <%- include ('../partials/footer.ejs') -%>

  <!-- footer section -->
  
  </center>

    <!-- jQery -->
    <script src="../js/jquery-3.4.1.min.js"></script>
    <!-- popper js -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script>
    <!-- bootstrap js -->
    <script src="../js/bootstrap.js"></script>
    <!-- owl slider -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js">
    </script>
    <!-- isotope js -->
    <script src="https://unpkg.com/isotope-layout@3.0.4/dist/isotope.pkgd.min.js"></script>
    <!-- nice select -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>
    <!-- custom js -->
    <script src="../js/custom.js"></script>
    <!-- Google Map -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&callback=myMap">
    </script>
    <!-- End Google Map -->
    <script>
      $(function () {
        setTimeout(function () {
          $('.alert').slideUp(500);
        }, 3000);
      });
  
    </script>